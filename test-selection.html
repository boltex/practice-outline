<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Selection Example</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 20px;
    }
    #textDiv {
      border: 1px solid #444;
      padding: 10px;
      width: 400px;
      height: 150px;
      overflow-y: auto;
    }
    #output {
      margin-top: 15px;
      padding: 10px;
      background: #f0f0f0;
      border: 1px solid #aaa;
    }
  </style>
</head>
<body>

<h3>Click and select text inside the box:</h3>

<div id="textDiv" contenteditable="true">
  This is some sample text. You can click inside this box, move the cursor, 
  or select part of the text. The script will show the current selection 
  or cursor position inside this div.
</div>

<div id="output">Selection info will appear here...</div>

<script>
  const textDiv = document.getElementById("textDiv");
  const output = document.getElementById("output");

  function updateSelection() {
    const selection = window.getSelection();

    if (!selection.rangeCount) {
      output.textContent = "No selection.";
      return;
    }

    const range = selection.getRangeAt(0);

    // Ensure selection is inside our div
    if (!textDiv.contains(range.commonAncestorContainer)) {
      output.textContent = "Selection is outside the target div.";
      return;
    }

    const selectedText = selection.toString();

    let info = "";
    if (selectedText.length > 0) {
      info += "Selected text: \"" + selectedText + "\"";
    } else {
      info += "Cursor is inside the div (no text selected).";
    }

    output.textContent = info;
  }

  // Listen for mouse and keyboard selection changes
  document.addEventListener("selectionchange", updateSelection);
</script>

</body>
</html>

